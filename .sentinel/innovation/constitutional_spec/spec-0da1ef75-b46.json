{
  "constraints": [],
  "invariants": [
    "deterministic_output",
    "explicit_paths",
    "fail_safe_behavior",
    "contract_preserving"
  ],
  "objective": "Refine the current AppSpec while preserving contracts and deterministic behavior.\nReturn:\n1) Outcome-first sections: What I changed / What needs your approval / What happens next.\n2) A strict JSON block fenced as ```appspec``` with keys:\n   app, dataModel.entities, views, actions, policies, integrations, tests, meta.\nNo prose after the appspec block.\n\nCurrent AppSpec:\n```appspec\n{\n  \"version\": \"1.0\",\n  \"app\": {\n    \"name\": \"Inizia Il Progetto\",\n    \"summary\": \"Draft generated from the current intent and latest response. Primary entity: item.\"\n  },\n  \"dataModel\": {\n    \"entities\": [\n      {\n        \"name\": \"item\",\n        \"fields\": [\n          {\n            \"name\": \"id\",\n            \"type\": \"string\",\n            \"required\": true\n          },\n          {\n            \"name\": \"title\",\n            \"type\": \"string\",\n            \"required\": true\n          },\n          {\n            \"name\": \"status\",\n            \"type\": \"string\",\n            \"required\": true\n          },\n          {\n            \"name\": \"created_at\",\n            \"type\": \"date\",\n            \"required\": true\n          }\n        ]\n      }\n    ]\n  },\n  \"views\": [\n    {\n      \"id\": \"dashboard\",\n      \"type\": \"dashboard\",\n      \"title\": \"Operational Dashboard\"\n    },\n    {\n      \"id\": \"item_list\",\n      \"type\": \"list\",\n      \"title\": \"Item List\",\n      \"entity\": \"item\"\n    },\n    {\n      \"id\": \"item_form\",\n      \"type\": \"form\",\n      \"title\": \"Item Form\",\n      \"entity\": \"item\"\n    }\n  ],\n  \"actions\": [\n    {\n      \"id\": \"create_item\",\n      \"type\": \"create\",\n      \"title\": \"Create item\",\n      \"entity\": \"item\",\n      \"requiresApproval\": true\n    },\n    {\n      \"id\": \"update_item\",\n      \"type\": \"update\",\n      \"title\": \"Update item\",\n      \"entity\": \"item\",\n      \"requiresApproval\": true\n    },\n    {\n      \"id\": \"delete_item\",\n      \"type\": \"delete\",\n      \"title\": \"Delete item\",\n      \"entity\": \"item\",\n      \"requiresApproval\": true\n    },\n    {\n      \"id\": \"read_item\",\n      \"type\": \"read\",\n      \"title\": \"Read item\",\n      \"entity\": \"item\",\n      \"requiresApproval\": false\n    }\n  ],\n  \"policies\": [\n    {\n      \"id\": \"policy_contract\",\n      \"rule\": \"Public contracts are preserved unless explicit migration is provided.\",\n      \"level\": \"hard\"\n    },\n    {\n      \"id\": \"policy_determinism\",\n      \"rule\": \"Execution remains deterministic and bounded by explicit approvals.\",\n      \"level\": \"hard\"\n    },\n    {\n      \"id\": \"policy_visibility\",\n      \"rule\": \"Default responses remain outcome-first; internals are progressive details.\",\n      \"level\": \"soft\"\n    }\n  ],\n  \"integrations\": [],\n  \"tests\": [\n    {\n      \"id\": \"test_guardrail_existing\",\n      \"type\": \"integration\",\n      \"description\": \"Existing behavior remains unchanged for current user flows.\"\n    },\n    {\n      \"id\": \"test_regression_write_gate\",\n      \"type\": \"policy\",\n      \"description\": \"Sensitive file operations require explicit approval.\"\n    },\n    {\n      \"id\": \"test_appspec_smoke\",\n      \"type\": \"e2e\",\n      \"description\": \"Draft AppSpec generates a valid preview without runtime errors.\"\n    }\n  ],\n  \"meta\": {\n    \"source\": \"heuristic_v1\",\n    \"confidence\": 0.54,\n    \"generated_at\": \"2026-02-15T06:05:01.081Z\",\n    \"prompt_excerpt\": \"inizia il progetto\",\n    \"validation\": {\n      \"status\": \"fallback\"\n    }\n  }\n}\n```",
  "scope": {
    "exclude": [],
    "include": [
      "minimal_tests"
    ]
  },
  "success_signals": [
    "safe_write_plan_generated_or_skipped",
    "verification_commands_present",
    "explainability_evidence_present"
  ],
  "version": 1
}